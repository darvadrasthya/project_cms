# BEGIN MODULE HEADERS
Header always set Strict-Transport-Security "max-age=31536000;"
Header always set x-xss-protection "1; mode=block"
Header always set X-Content-Type-Options "nosniff"
Header always set Cache-Control "max-age=2628000, public"
Header always set Referrer-Policy "no-referrer-when-downgrade"
Header always set Content-Security-Policy "upgrade-insecure-requests"
Header always set Permissions-Policy "geolocation=*"
Header always set Content-Security-Policy "frame-ancestors 'self'"
# END MODULE HEADERS

# Config Base URL
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]

# Blokir akses ke berkas .env
<Files .env>
    # Mengatur urutan izin: Izinkan akses dulu, kemudian larang
    Order allow,deny
    Deny from all
</Files>

# Disable file directory Index
Options -Indexes

# Set noindex, nofollow
Header set X-Robots-Tag "noindex, nofollow"
Header set Cache-control "no-store, no-cache, must-revalidate"
Header set Pragma "no-cache"
Header set Expires "-1"

# Konfigurasi CORS di setting selama 1 Jam (3600)
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Methods "GET, POST, OPTIONS, PUT"
    Header set Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept"
    Header always set Access-Control-Allow-Credentials "true"
    Header set Access-Control-Max-Age "3600"
</IfModule>
